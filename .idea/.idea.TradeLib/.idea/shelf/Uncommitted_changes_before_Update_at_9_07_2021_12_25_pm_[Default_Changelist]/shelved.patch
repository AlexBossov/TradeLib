Index: TradeLib/Controllers/HomeController.cs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>using System;\r\nusing System.Diagnostics;\r\nusing System.Linq;\r\nusing Microsoft.AspNetCore.Mvc;\r\nusing Microsoft.Extensions.Logging;\r\nusing TradeLib.Models;\r\nusing MailKit.Net.Smtp;\r\nusing MailKit;\r\nusing MimeKit;\r\n\r\nnamespace TradeLib.Controllers\r\n{\r\n    public class HomeController : Controller\r\n    {\r\n        private readonly ILogger<HomeController> _logger;\r\n\r\n        public Context db;\r\n        public HomeController(ILogger<HomeController> logger, Context context)\r\n        {\r\n            _logger = logger;\r\n            db = context;\r\n        }\r\n\r\n        public IActionResult Index()\r\n        {\r\n            return View(db.Persons.ToList());\r\n        }\r\n\r\n        public IActionResult Privacy()\r\n        {\r\n            return View();\r\n        }\r\n        \r\n        public IActionResult Registration()\r\n        {\r\n            return View();\r\n        }\r\n        \r\n        public IActionResult Person()\r\n        {\r\n            return View();\r\n        }\r\n        \r\n        // Считывание данных из формы регистрации\r\n        [HttpPost]\r\n        public IActionResult Registration(Person person)\r\n        {\r\n            try\r\n            {\r\n                ViewData[\"Email\"] = person.Email;\r\n                ViewData[\"Name\"] = person.Name;\r\n                ViewData[\"Password\"] = person.Password;\r\n                db.Add(person);\r\n                var message = new MimeMessage();\r\n                var addressFrom = new MailboxAddress(\"Admin\", \"behappydtworry@gmail.com\");\r\n                message.From.Add(addressFrom);\r\n                var addressTo = new MailboxAddress(\"User\", ViewData[\"Email\"].ToString());\r\n                message.To.Add(addressTo);\r\n\r\n                message.Subject = \"Confirm registration\";\r\n\r\n                var body = new BodyBuilder {HtmlBody = \"<a>Click here to confirm the registration on TradeLib</a>\"};\r\n                message.Body = body.ToMessageBody();\r\n\r\n                var client = new SmtpClient();\r\n                try\r\n                {\r\n                    client.Connect(\"smtp.gmail.com\", 465, true);\r\n                    client.Authenticate(\"behappydtworry@gmail.com\",\"$om&Vasily2_2\");\r\n                }\r\n                catch (Exception e)\r\n                {\r\n                    Console.WriteLine($\"{e.Message}\");\r\n                    throw;\r\n                }\r\n                \r\n                \r\n                client.Send(message);\r\n                client.Disconnect(true);\r\n                client.Dispose();\r\n\r\n                //test page to show working registration method\r\n                return View(\"Person\");\r\n            }\r\n            catch\r\n            {\r\n                return View();\r\n            }\r\n        }\r\n        \r\n        [ResponseCache(Duration = 0, Location = ResponseCacheLocation.None, NoStore = true)]\r\n        public IActionResult Error()\r\n        {\r\n            return View(new ErrorViewModel {RequestId = Activity.Current?.Id ?? HttpContext.TraceIdentifier});\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/TradeLib/Controllers/HomeController.cs b/TradeLib/Controllers/HomeController.cs
--- a/TradeLib/Controllers/HomeController.cs	(revision 16383a01ff6a4da020ce43b633a476596f61c5a9)
+++ b/TradeLib/Controllers/HomeController.cs	(date 1625742309489)
@@ -51,6 +51,7 @@
                 ViewData["Name"] = person.Name;
                 ViewData["Password"] = person.Password;
                 db.Add(person);
+                
                 var message = new MimeMessage();
                 var addressFrom = new MailboxAddress("Admin", "behappydtworry@gmail.com");
                 message.From.Add(addressFrom);
@@ -66,7 +67,8 @@
                 try
                 {
                     client.Connect("smtp.gmail.com", 465, true);
-                    client.Authenticate("behappydtworry@gmail.com","$om&Vasily2_2");
+                    // client.Authenticate("behappydtworry@gmail.com","$om&Vasily2_2");
+                    client.Authenticate("annbossova@gmail.com","AlexBossov123412344321");
                 }
                 catch (Exception e)
                 {
@@ -74,7 +76,6 @@
                     throw;
                 }
                 
-                
                 client.Send(message);
                 client.Disconnect(true);
                 client.Dispose();
